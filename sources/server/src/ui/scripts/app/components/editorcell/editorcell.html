<div id="cell-{{cell.id}}" class="datalab-editor-cell row" ng-class="{ 'datalab-editor-cell-active' : cell.active }">
  <!-- NOTE: this template assumes that it lives inside of some bootstrap .container as the base grid system -->

  <!-- Edit region -->
  <div class="datalab-editor-cell-edit-region col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-show="enableEditRegion" >
    <div class="datalab-editor-cell-input row">
      <div class="datalab-editor-cell-identifier datalab-editor-cell-identifier-input col-md-1">
        <!-- FIXME: css class name s/cell-index/execution-counter/ -->
        <!-- IPython-style input region with execution counter
        In&nbsp;
        <span class="datalab-editor-cell-index">[{{ cell.executionCounter }}]</span>
        -->
        <!-- Minimalistic input region marker -->
        <span class="fa fa-terminal fa-lg" ng-if="cell.type == 'code'"></span>
        <span class="fa fa-edit fa-lg" ng-if="cell.type == 'markdown'"></span>
        <span class="fa fa-paragraph fa-lg" ng-if="cell.type == 'heading'"></span>
      </div>

      <div class="datalab-editor-cell-input-content col-md-10">
        <datalab-code-editor source="cell.source" active="cell.active" keymap='keymap' actions='actions'></datalab-code-editor>
      </div>

      <!-- Cell toolbar -->
      <div class="datalab-editor-cell-toolbar col-md-1">
        <!-- TODO(bryantd): only show cell toolbar when cell is active  -->
        <datalab-cell-toolbar
            cell="cell"
            worksheet-id="worksheetId"></datalab-cell-toolbar>
      </div>
    </div>

    <!-- TODO(bryantd): may want to separate out the output region into a separate directive as this is becoming large/long -->
    <div class="datalab-editor-cell-output row" ng-show="cell.outputs">
      <div class="datalab-editor-cell-identifier datalab-editor-cell-identifier-output col-md-1">
        <!-- IPython-style output region with execution counter
        Out
        <span class="datalab-editor-cell-index">[{{ cell.executionCounter }}]</span>
        -->
      </div>
      <div class="datalab-editor-cell-outputs col-md-11">
        <!-- For each output, generate a mimetype-specific element -->
        <div ng-repeat="output in cell.outputs" ng-switch="output.preferredMimetype">
          <!-- Plain text -->
          <div ng-switch-when="text/plain">
            {{ output.mimetypeBundle['text/plain'] }}
          </div>
          <!-- HTML -->
          <div ng-switch-when="text/html" ng-bind-html="output.trustedHtml"></div>
          <!-- PNG -->
          <img ng-switch-when="image/png" ng-src="data:image/png;base64,{{output.mimetypeBundle['image/png']}}"/>
          <!-- JPEG -->
          <img ng-switch-when="image/jpeg" ng-src="data:image/jpeg;base64,{{output.mimetypeBundle['image/jpeg']}}"/>
        </div>
      </div>

    </div>

    <div class="clearer"></div>
  </div>

  <!-- Preview region -->
  <div class="datalab-editor-cell-preview-region col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-dblclick="onPreviewRegionDoubleClick()" ng-if="enablePreviewRegion">
    <datalab-markdown-viewer ng-if="cell.type == 'markdown'" source="cell.source"></datalab-markdown-viewer>
    <datalab-heading-viewer ng-if="cell.type == 'heading'" source="cell.source"level="cell.metadata.level"></datalab-heading-viewer>
  </div>

</div>

